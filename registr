private string usersDataFile = "users.txt";

public Form1()
{
    InitializeComponent();
    if (!File.Exists(usersDataFile))
        File.WriteAllText(usersDataFile, "");
}

private void buttonRegister_Click(object sender, EventArgs e)
{
    string u = textBoxUsername.Text.Trim();
    string p = textBoxPassword.Text.Trim();

    if (u == "" || p == "")
    {
        MessageBox.Show("Please enter both username and password.", "Information", MessageBoxButtons.OK, MessageBoxIcon.Information);
        return;
    }

    string[] users = File.ReadAllLines(usersDataFile); // <- burda da dəyişdi
    foreach (string line in users)
    {
        string[] parts = line.Split(';');
        if (parts.Length == 2 && parts[0] == u)
        {
            MessageBox.Show("This username already exists!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            return;
        }
    }

    File.AppendAllText(usersDataFile, u + ";" + p + Environment.NewLine); // <- burda da dəyişdi
    nickname = u;

    MessageBox.Show("Registration Successful!", "Information", MessageBoxButtons.OK, MessageBoxIcon.Information);
    textBoxUsername.Text = "";
    textBoxPassword.Text = "";
}
